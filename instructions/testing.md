# 테스트 지침

## 테스트 원칙

- 테스트는 문서다: 코드의 의도를 설명
- 하나의 테스트는 하나의 동작만 검증
- 테스트는 독립적이어야 함 (순서 무관)
- 빠르게 실행되어야 함

## 테스트 피라미드

```
        /\
       /  \     E2E 테스트 (적게)
      /────\
     /      \   통합 테스트 (중간)
    /────────\
   /          \  단위 테스트 (많이)
  /────────────\
```

## 단위 테스트

### 좋은 단위 테스트 특징 (FIRST)
- **F**ast: 빠르게 실행
- **I**ndependent: 다른 테스트와 독립
- **R**epeatable: 반복 실행해도 같은 결과
- **S**elf-validating: 자동으로 성공/실패 판단
- **T**imely: 코드 작성과 함께

### 테스트 구조 (AAA 패턴)
```typescript
test('사용자 이름을 반환한다', () => {
  // Arrange: 준비
  const user = new User('홍길동');
  
  // Act: 실행
  const name = user.getName();
  
  // Assert: 검증
  expect(name).toBe('홍길동');
});
```

### 네이밍 컨벤션
```typescript
// ✅ 동작을 설명하는 이름
test('빈 장바구니에 상품 추가 시 총 1개가 된다', () => {});
test('잘못된 이메일 형식이면 에러를 던진다', () => {});

// ❌ 구현 세부사항을 설명하는 이름
test('addItem 메서드 테스트', () => {});
```

## 통합 테스트

- 여러 모듈의 상호작용 검증
- 데이터베이스, API 연동 테스트
- 테스트 환경 격리 (테스트 DB 사용)

## E2E 테스트

- 사용자 관점에서 전체 흐름 테스트
- 핵심 사용자 시나리오 위주
- 실행 시간이 길므로 최소화

## 모킹

```typescript
// 외부 의존성은 모킹
jest.mock('./api', () => ({
  fetchUser: jest.fn(() => Promise.resolve({ name: '홍길동' }))
}));
```

- 외부 API, 데이터베이스 등은 모킹
- 과도한 모킹 주의 (실제 동작과 달라질 수 있음)

## 커버리지

- 커버리지 100%가 목표가 아님
- 중요한 비즈니스 로직 위주로 테스트
- 커버리지보다 테스트 품질이 중요
